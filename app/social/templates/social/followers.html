{% extends "social/base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>My Followers</h2>
    <ul id="followers-list">
        <li>Loading...</li>
    </ul>
</div>

<script>
    async function loadFollowers() {
        let response = await fetch(`/api/authors/{{ request.user.id }}/followers/`);
        let data = await response.json();
        let followersList = document.getElementById("followers-list");

        followersList.innerHTML = ""; // Clear loading text

        if (!data.followers || data.followers.length === 0) {
            followersList.innerHTML = "<li>No followers found.</li>";
            return;
        }

        data.followers.forEach(follower => {
            let li = document.createElement("li");
            li.textContent = `${follower.displayName} (${follower.id})`;
            followersList.appendChild(li);
        });
    }

    document.addEventListener("DOMContentLoaded", loadFollowers);
</script>
{% endblock %}
