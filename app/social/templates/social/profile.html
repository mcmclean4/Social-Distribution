{% extends "social/base.html" %}

{% block content %}

<style>
    .gridContainer{
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1em;
    }
    
    h2{
        color: aqua;
    }
    .post {
            position: relative;
            width: 20em;
            height: 20em;
            border: 1px solid #ddd;
            padding: 0px;
            background-color: #fff;
    }

    .imagePost{
        width: 100%;
        height: 100%;
    }
    .textPost{
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        transition: 0.3s ease-in-out;
    }

    .post img{
        width: 100%;
        height: 100%;
        object-fit: cover;
        overflow: hidden;
        transition: opacity 0.3s ease-in-out;
    }

    .post-title-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5em;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
    }

    .post:hover .post-title-overlay {
    opacity: 1;
    }

    .post:hover .textPost {
    filter: blur(3px);
    }   

    .post:hover .imagePost {
    filter: blur(3px);
    }   
    .displayName{
        display: inline;
        margin-left: 0.5em;
        margin-right: 2em;
    }

    .profilePicture{
        width: 150px;
        height: 150px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #333;
        margin-bottom: 3em;
    }
</style>
<div class="container mt-4">
    <img src="/media/{{ author.profileImage }}" class="profilePicture">
    <h1 class="displayName">{{ author.displayName }}</h1>
    <h4 style="display: inline; margin-right: 1em;">Followers: 0</h4>
    <h4 style="display: inline; margin-right: 1em;">Following: 0</h4>

    <form action="{% url 'social:profile_edit' id=author_id %}" style="display: inline;">
        {% if author_id == profile_author_id %}
        <button class="btn btn-primary" type="submit">Edit Profile</button>
        {% endif %}
    </form>
    <div class="gridContainer">
        {% for post in posts %}
        <a href="{% url 'social:post_detail' internal_id=post.id %}">
            <div class="post">
                
                    {% if post.contentType == 'text/plain' or post.contentType == 'text/markdown' %}
                    <div class="textPost">
                        <p> {{ post.content }} </p>
                    </div>
                    <div class="post-title-overlay">
                        <h2>{{ post.title }}</h2>
                    </div>
                    {% else %}
                    <div class="imagePost">
                        <img src="/media/{{ post.image }}" class="postImage">
                    </div>
                    <div class="post-title-overlay">
                        <h2>{{ post.title }}</h2>
                    </div>
                    {% endif %}
            </div>
        </a>
        {% endfor %}
    </div>
    
</div>

{% endblock %}